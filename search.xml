<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å‡çº§Spark3.4.1</title>
    <url>/%E5%8D%87%E7%BA%A7Spark3-4-1/</url>
    <content><![CDATA[<p><a href="https://spark.apache.org/">Apache Spark</a>ï¼Œæ˜¯ä¸€ä¸ªå¤šè¯­è¨€å¼•æ“ï¼Œç”¨äºåœ¨å•èŠ‚ç‚¹æœºå™¨æˆ–é›†ç¾¤ä¸Šæ‰§è¡Œæ•°æ®å·¥ç¨‹ã€æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ ã€‚</p>
<span id="more"></span>

<ul>
<li>Batch &#x2F; streaming dataÂ æ‰¹é‡&#x2F;æµå¼æ•°æ®<ul>
<li>Pythonã€SQLã€Scalaã€Javaæˆ–Rï¼Œç»Ÿä¸€æ•°æ®çš„æ‰¹å¤„ç†å’Œå®æ—¶æµå¤„ç†</li>
</ul>
</li>
<li>SQL analyticsÂ SQLåˆ†æ<ul>
<li>æ‰§è¡Œå¿«é€Ÿã€åˆ†å¸ƒå¼çš„ANSI SQLæŸ¥è¯¢ï¼Œä»¥å®ç°ä»ªè¡¨æ¿å’Œå³å¸­æŠ¥å‘Šã€‚</li>
<li>æ¯”å¤§å¤šæ•°æ•°æ®ä»“åº“æ›´å¿«ã€‚</li>
</ul>
</li>
<li>Data science at scale å¤§è§„æ¨¡æ•°æ®ç§‘å­¦<ul>
<li>å¯¹PBçº§æ•°æ®æ‰§è¡Œæ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰ï¼Œè€Œæ— éœ€é‡‡ç”¨ä¸‹é‡‡æ ·</li>
</ul>
</li>
<li>Machine learningÂ æœºå™¨å­¦ä¹ <ul>
<li>åœ¨ç”µè„‘ä¸Šè®­ç»ƒæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„ä»£ç æ‰©å±•åˆ°æ•°åƒå°æœºå™¨çš„å®¹é”™é›†ç¾¤</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å®˜ç½‘ä¸‹è½½spark3-4-1çš„jaråŒ…"><a href="#å®˜ç½‘ä¸‹è½½spark3-4-1çš„jaråŒ…" class="headerlink" title="å®˜ç½‘ä¸‹è½½spark3.4.1çš„jaråŒ…"></a>å®˜ç½‘ä¸‹è½½spark3.4.1çš„jaråŒ…</h2><h3 id="Spark-Download"><a href="#Spark-Download" class="headerlink" title="Spark Download"></a>Spark Download</h3><p>ä¸‹è½½  spark-3.4.1-bin-hadoop3.tgz åï¼Œåœ¨ç›¸åº”ç›®å½•è¿›è¡Œè§£å‹æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar xvf  spark-3.4.1-bin-hadoop3.tgz  -C /var/local/</span><br></pre></td></tr></table></figure>

<h2 id="è½¯é“¾æ›´æ–°"><a href="#è½¯é“¾æ›´æ–°" class="headerlink" title="è½¯é“¾æ›´æ–°"></a>è½¯é“¾æ›´æ–°</h2><h3 id="åˆ é™¤ä¹‹å‰çš„è½¯é“¾"><a href="#åˆ é™¤ä¹‹å‰çš„è½¯é“¾" class="headerlink" title="åˆ é™¤ä¹‹å‰çš„è½¯é“¾"></a>åˆ é™¤ä¹‹å‰çš„è½¯é“¾</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm spark</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºæ–°çš„è½¯é“¾ï¼š"><a href="#åˆ›å»ºæ–°çš„è½¯é“¾ï¼š" class="headerlink" title="åˆ›å»ºæ–°çš„è½¯é“¾ï¼š"></a>åˆ›å»ºæ–°çš„è½¯é“¾ï¼š</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s /var/local/spark-3.4.1-bin-hadoop3  /opt/soft/spark</span><br></pre></td></tr></table></figure>

<blockquote>
<p>âŒè½¯é“¾æŠ¥é”™ï¼šç›®å½•æ— æ³•è®¿é—®<br>ğŸ’¡è§£å†³æ–¹æ³•ï¼šç”¨ç»å¯¹è·¯å¾„ï¼ˆä¸Šé¢å·²ç”¨ç»å¯¹è·¯å¾„ï¼‰</p>
</blockquote>
<h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><h3 id="å°†ä»¥å‰ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶-copy-åˆ°å½“å‰-spark-conf-æ–‡ä»¶å¤¹ä¸‹"><a href="#å°†ä»¥å‰ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶-copy-åˆ°å½“å‰-spark-conf-æ–‡ä»¶å¤¹ä¸‹" class="headerlink" title="å°†ä»¥å‰ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ copy åˆ°å½“å‰ spark&#x2F;conf æ–‡ä»¶å¤¹ä¸‹"></a>å°†ä»¥å‰ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶ copy åˆ°å½“å‰ spark&#x2F;conf æ–‡ä»¶å¤¹ä¸‹</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp spark-env.sh spark-defaults.conf  core-site.xml  hdfs-site.xml  hive-site.xml  yarn-site.xml  &lt;ç›®æ ‡åœ°å€IP&gt;: /opt/soft/spark/conf</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é…ç½®æ–‡ä»¶åŒ…æ‹¬ï¼š<br>spark-env.sh<br>spark-defaults.conf<br>core-site.xml<br>hdfs-site.xml<br>hive-site.xml<br>yarn-site.xml ï¼ˆä¸å¿…é€‰ï¼‰</p>
</blockquote>
<h3 id="LibåŒ…æ›´æ–°"><a href="#LibåŒ…æ›´æ–°" class="headerlink" title="LibåŒ…æ›´æ–°"></a>LibåŒ…æ›´æ–°</h3><ol>
<li>æ›´æ–° $SPARK_HOME&#x2F;jars&#x2F;  ç›®å½•</li>
</ol>
<ul>
<li>ä¸‹è½½ iceberg-spark-runtime-*.jar</li>
<li>ä¸‹è½½ hive-hcatalog-core-*.jar</li>
</ul>
<ol start="2">
<li>æ›´æ–°HDFSç›®å½• sparkjars&#x2F; çš„å…±äº«jaråŒ…</li>
</ol>
<ul>
<li>å°† $SPARK_HOME&#x2F;jars ä¸‹é¢çš„  *.jar  éƒ½ä¸Šä¼ åˆ°æ­¤ç›®å½•</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hdfsä¸Šåˆ›å»ºç›®å½•</span></span><br><span class="line">hdfs dfs -mkdir /sparkjars/spark_341</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šä¼ å‘½ä»¤</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hdfs dfs -put $SPARK_HOME/jars/*.jar /sparkjars/spark_3xx</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•spark"><a href="#æµ‹è¯•spark" class="headerlink" title="æµ‹è¯•spark"></a>æµ‹è¯•spark</h2><h3 id="æäº¤Piè®¡ç®—æµ‹è¯•"><a href="#æäº¤Piè®¡ç®—æµ‹è¯•" class="headerlink" title="æäº¤Piè®¡ç®—æµ‹è¯•"></a>æäº¤Piè®¡ç®—æµ‹è¯•</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">date;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">SPARK_HOME/bin/spark-submit</span></span><br><span class="line">--class org.apache.spark.examples.SparkPi</span><br><span class="line">--master yarn</span><br><span class="line">--deploy-mode client</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">SPARK_HOME/examples/jars/spark-examples*.jar</span></span><br><span class="line">10;date</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/opt/soft/spark/bin/spark-submit</span><br><span class="line">--class org.apache.spark.examples.SparkPi</span><br><span class="line">--master yarn</span><br><span class="line">--deploy-mode client</span><br><span class="line">/opt/soft/spark/examples/jars/spark-examples*.jar</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<h3 id="yarn-æ¨¡å¼ç›´æ¥è¿è¡Œ"><a href="#yarn-æ¨¡å¼ç›´æ¥è¿è¡Œ" class="headerlink" title="yarn æ¨¡å¼ç›´æ¥è¿è¡Œ"></a>yarn æ¨¡å¼ç›´æ¥è¿è¡Œ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">SPARK_HOME/bin/spark-submit --class org.apache.spark.examples.SparkPi</span></span><br><span class="line">--master yarn</span><br><span class="line">--deploy-mode cluster</span><br><span class="line">--driver-memory 4g</span><br><span class="line">--executor-memory 2g</span><br><span class="line">--executor-cores 2</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">SPARK_HOME/examples/jars/spark-examples*.jar</span></span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<h3 id="spark-thrift-serveræµ‹è¯•"><a href="#spark-thrift-serveræµ‹è¯•" class="headerlink" title="spark thrift serveræµ‹è¯•"></a>spark thrift serveræµ‹è¯•</h3><ol>
<li>sparksql æµ‹è¯•</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">SPARK_HOME/bin/spark-sql --executor-cores 1 --executor-memory 2G --num-executors 1 --master yarn  --name spark_sql_test</span></span><br><span class="line"></span><br><span class="line">select count(*) from essd_db.ods_essd_dut_result</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Spark</category>
      </categories>
      <tags>
        <tag>ç»„ä»¶å‡çº§</tag>
      </tags>
  </entry>
  <entry>
    <title>Nice To Meet You, My Blog!!!</title>
    <url>/Nice-To-Meet-You-My-Blog/</url>
    <content><![CDATA[<p>Nice To Meet You ï¼</p>
]]></content>
      <categories>
        <category>å…³äºæˆ‘</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
</search>
